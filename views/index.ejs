<%- include('layout', { title: 'Products', user: user, cartCount: cartCount, wishlist: (session && session.wishlist) || [] , body: '' }) %>

<section class="products-list">
  <h1>Products</h1>
  <div class="cards">
    <% products.forEach(p => { %>
      <div class="card">
        <a href="/product/<%= p.id %>">
          <img src="<%= p.images[Object.keys(p.images)[0]][0] %>" alt="<%= p.title %>">
        </a>
        <h3><%= p.title %></h3>
        <div class="price">â‚¹<%= p.price %></div>
        <p class="muted small"><%= p.desc %></p>
        <div class="card-actions">
          <a class="btn" href="/product/<%= p.id %>">View</a>
          <form method="post" action="/cart/add" style="display:inline">
            <input type="hidden" name="id" value="<%= p.id %>">
            <input type="hidden" name="color" value="<%= Object.keys(p.images)[0] %>">
            <input type="hidden" name="qty" value="1">
            <button class="btn secondary">Add to cart</button>
          </form>
        </div>
      </div>
    <% }) %>
  </div>
</section>
